<div class="prod-list-page">
  <div class="filters">
    <div class="filters-name-img">
      <div><img src='/assets/img/filter.PNG' alt="" class="filter-img"/></div>
      <div class="filters-name">Фильтры</div>
    </div>

    <div class="filter-block">
      <div class="filter-name">Акции и товары со скидкой</div>
      <div class="filter-detail">
        <label><input type="checkbox" (click)="setFilterDiscount()">Скидки</label>
      </div>
    </div>

    <div class="filter-block">
      <div class="filter-name">Бренд</div>
      <div *ngFor='let brand of possibleFilters.brand'>
        <div class="filter-detail">
          <label><input type="checkbox" (click)="setFilterBrand(brand)" class="filter-checkbox">{{brand}}</label>
        </div>
      </div>
    </div>

    <div class="filter-block">
      <div class="filter-name">Страна</div>
      <div *ngFor='let country of possibleFilters.country'>
        <div class="filter-detail">
          <label><input type="checkbox" (click)="setFilterCountry(country)" class="filter-checkbox">{{country}}</label>
        </div>
      </div>
    </div>
  </div>

  <div class="items-block">

    <div class="items-header">
      <div class="category-name">{{mainCategory.name}}</div>
      <div class="sort-btn" (click)="setShowSortOptions()">
        <div class="cur-sort">
          <div class="sort-name">
            <div *ngIf="!currentSortOption.type">
              <img src='/assets/img/str.PNG' alt="" class="sort-direction sort-img"/>
            </div>
            <div *ngIf="currentSortOption.type">
              <img src='/assets/img/str.PNG' alt="" class="sort-direction sort-img sort-img-upsidedown"/>
            </div>
            <div>{{currentSortOption.name}}</div>
          </div>
          <div *ngIf="!showSortOptions"><img src='/assets/img/str2.PNG' alt="" class="sort-img"/></div>
          <div *ngIf="showSortOptions"><img src='/assets/img/str2.PNG' alt="" class="sort-img sort-img-upsidedown"/></div>
        </div>

        <div *ngIf="showSortOptions" class="sort-options">
          <div *ngFor='let sortOption of sortOptions' (click)="setSortOption(sortOption)">
            <div *ngIf="sortOption.name !== currentSortOption.name" class="sort-option">
              <div class="sort-name">  
                <div *ngIf="!sortOption.type">
                  <img src='/assets/img/str.PNG' alt="" class="sort-direction sort-img"/>
                </div>
                <div *ngIf="sortOption.type">
                  <img src='/assets/img/str.PNG' alt="" class="sort-direction sort-img sort-img-upsidedown"/>
                </div>
                <div>{{sortOption.name}}</div>
              </div>
            </div>
          </div>
        </div>


      </div>
      
    </div>

    <div class="tags-block">
      <div *ngFor='let tag of possibleFilters.tags' class="tag">
        <input type="checkbox" (click)="setFilterTag(tag)" class="tag-checkbox" id="{{tag}}"/><label class="tag-label" for="{{tag}}">{{tag}}</label>
      </div>
    </div>

    <div class="items">

      <div *ngFor='let product of products'>

        <div class="item">
          <div *ngIf="product.fresh-days" class="fresh">
            <div>
              <img src='/assets/img/fresh.PNG' alt="" class="fresh-list"/>
              <span class="fresh-num">{{product.freshDays}}</span>
            </div>
            <div class="fresh-days">ДНЕЙ</div>
          </div>

          <div class="img"><img src={{product.img}} alt={{product.name}} class="prod-img"></div>

          <div class="rating-like">
            <div class="rating">
              <div [ngSwitch]="product.rating">
                <div *ngSwitchCase="'1'">
                    <img src='/assets/img/star_full_grey.png' alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/>
                </div>
                <div *ngSwitchCase="'2'">
                    <img src='/assets/img/star_full_grey.png' alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/>
                </div>
                <div *ngSwitchCase="'3'">
                    <img src='/assets/img/star_full_grey.png' alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/> 
                </div>
                <div *ngSwitchCase="'4'">
                    <img src='/assets/img/star_full_grey.png' alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star star-empty"/>
                </div>
                <div *ngSwitchDefault>
                    <img src='/assets/img/star_full_grey.png' alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                    <img src="/assets/img/star_full_grey.png" alt="" class="star"/>
                </div>
              </div>
              <div class="rating-num">{{product.ratingNum}}</div>
            </div>
            <div><img src="/assets/img/heart_red.svg" alt="" class="heart"/></div>
          </div>

          
          <div class="name">{{product.name}}<br>{{product.desc}}</div>

          
          <div *ngIf="product.discount">
            <div class="price-and-discount">
              <div class="price-old">
                {{product.price.toString().split('.')[0]}}<span class="penny-old">,{{product.price.toString().split('.')[1]}} </span><span class="ruble-old">&#8381;</span>
              </div>
              <div class="discount">-{{product.discountNum}}%</div>
            </div>
            <div class="price price-discount">
              {{product.priceDiscount.toString().split('.')[0]}}<span class="penny">,{{product.priceDiscount.toString().split('.')[1]}} </span><span class="ruble">&#8381;/</span><span class="copy">шт</span>
            </div>
          </div>
          
          <div *ngIf="!product.discount">
            <div class="price discount-empty">
              {{product.price.toString().split('.')[0]}}<span class="penny">,{{product.price.toString().split('.')[1]}} </span><span class="ruble">&#8381;/</span><span class="copy">шт</span>
            </div>
          </div>

          
          <button class="buy-btn"><div>Купить</div><div><img src="/assets/img/cart.png" alt="" class="cart"/></div></button>

          <div class="delivery">Доставка {{product.delivery}}</div>
        </div>


      </div>
    </div>
  </div>
</div>